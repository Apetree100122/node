version: "3"

services:
  alice:
    build: .
    image: dhxdocker/datahighway:latest
    ports:
      - 30333:30333 # TCP
      - 9944:9944 # WS
      - 9933:9933 # RPC
    volumes:
      - ./scripts:/dhx/scripts
    restart: always
    entrypoint:
      - ./docker-entrypoint-alice.sh
  bob:
    build: .
    image: dhxdocker/datahighway:latest
    depends_on:
      - alice
    ports:
      - 30334:30334
      - 9945:9945
      - 9934:9934
    volumes:
      - ./scripts:/dhx/scripts
    restart: always
    entrypoint:
      - ./docker-entrypoint-bob.sh
  charlie:
    build: .
    image: dhxdocker/datahighway:latest
    depends_on:
      - bob
    ports:
      - 30335:30335
      - 9946:9946
      - 9935:9935
    volumes:
      - ./scripts:/dhx/scripts
    restart: always
    entrypoint:
      - ./docker-entrypoint-charlie.sh
